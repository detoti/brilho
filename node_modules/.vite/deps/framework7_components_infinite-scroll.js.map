{
  "version": 3,
  "sources": ["../../framework7/components/infinite-scroll/infinite-scroll.js"],
  "sourcesContent": ["import $ from '../../shared/dom7.js';\nimport { bindMethods } from '../../shared/utils.js';\nconst InfiniteScroll = {\n  handle(el, e) {\n    const app = this;\n    const $el = $(el);\n    const scrollTop = $el[0].scrollTop;\n    const scrollHeight = $el[0].scrollHeight;\n    const height = $el[0].offsetHeight;\n    let distance = $el[0].getAttribute('data-infinite-distance');\n    const virtualListContainer = $el.find('.virtual-list');\n    let virtualList;\n    const onTop = $el.hasClass('infinite-scroll-top');\n    if (!distance) distance = 50;\n    if (typeof distance === 'string' && distance.indexOf('%') >= 0) {\n      distance = parseInt(distance, 10) / 100 * height;\n    }\n    if (distance > height) distance = height;\n    if (onTop) {\n      if (scrollTop < distance) {\n        $el.trigger('infinite', e);\n        app.emit('infinite', $el[0], e);\n      }\n    } else if (scrollTop + height >= scrollHeight - distance) {\n      if (virtualListContainer.length > 0) {\n        virtualList = virtualListContainer.eq(-1)[0].f7VirtualList;\n        if (virtualList && !virtualList.reachEnd && !virtualList.params.updatableScroll) {\n          return;\n        }\n      }\n      $el.trigger('infinite', e);\n      app.emit('infinite', $el[0], e);\n    }\n  },\n  create(el) {\n    const $el = $(el);\n    const app = this;\n    function scrollHandler(e) {\n      app.infiniteScroll.handle(this, e);\n    }\n    $el.each(element => {\n      element.f7InfiniteScrollHandler = scrollHandler;\n      element.addEventListener('scroll', element.f7InfiniteScrollHandler);\n    });\n  },\n  destroy(el) {\n    const $el = $(el);\n    $el.each(element => {\n      element.removeEventListener('scroll', element.f7InfiniteScrollHandler);\n      delete element.f7InfiniteScrollHandler;\n    });\n  }\n};\nexport default {\n  name: 'infiniteScroll',\n  create() {\n    const app = this;\n    bindMethods(app, {\n      infiniteScroll: InfiniteScroll\n    });\n  },\n  on: {\n    tabMounted(tabEl) {\n      const app = this;\n      const $tabEl = $(tabEl);\n      const $isEls = $tabEl.find('.infinite-scroll-content');\n      if ($tabEl.is('.infinite-scroll-content')) $isEls.add($tabEl);\n      $isEls.each(el => {\n        app.infiniteScroll.create(el);\n      });\n    },\n    tabBeforeRemove(tabEl) {\n      const $tabEl = $(tabEl);\n      const app = this;\n      const $isEls = $tabEl.find('.infinite-scroll-content');\n      if ($tabEl.is('.infinite-scroll-content')) $isEls.add($tabEl);\n      $isEls.each(el => {\n        app.infiniteScroll.destroy(el);\n      });\n    },\n    pageInit(page) {\n      const app = this;\n      page.$el.find('.infinite-scroll-content').each(el => {\n        app.infiniteScroll.create(el);\n      });\n    },\n    pageBeforeRemove(page) {\n      const app = this;\n      page.$el.find('.infinite-scroll-content').each(el => {\n        app.infiniteScroll.destroy(el);\n      });\n    }\n  }\n};"],
  "mappings": "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",
  "names": []
}
